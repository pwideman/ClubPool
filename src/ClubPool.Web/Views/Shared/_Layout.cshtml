@using ClubPool.Web.Controllers.Shared.SidebarGadgets

<!DOCTYPE html>
<html>
  <head>
    <title>@if (!string.IsNullOrWhiteSpace(ViewBag.Title)) { @(ViewBag.Title + " - ") } @ViewBag.SiteName</title>
    <meta charset="utf-8" />
    @Html.Stylesheet("site.less")
  </head>
  <body>
    <div id="header">
      @Html.ContentImage("HeaderLogo.png", "Logo")
      <div class="loginStatusPanel">
        @{Html.RenderAction("LoginStatus", "Login");}
      </div>
      <div id="menucontainer">
        @{Html.RenderAction("Menu", "Navigation");}
      </div>
    </div>
    <div id="container">
      <div id="maincontent" class="column">
        @RenderBody()
      </div>
      @if (ViewData.ContainsKey(GlobalViewDataProperty.SidebarGadgetCollection)) {
        SidebarGadgetCollection sidebarGadgetCollection =
          ViewData[GlobalViewDataProperty.SidebarGadgetCollection] as SidebarGadgetCollection;
        if (sidebarGadgetCollection.Count > 0) {
          <div class="column sidebar-container">
            <div class="sidebar sidebar-corner">
              @foreach (var gadget in sidebarGadgetCollection.Values) {
                Html.RenderAction(gadget.Action, gadget.Controller, gadget.RouteValues);
              }
            </div>
          </div>
        }
      }
    </div>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jquery/1.4.4/jquery.min.js"></script>
    <script type="text/javascript" src="http://ajax.googleapis.com/ajax/libs/jqueryui/1.8.7/jquery-ui.min.js"></script>
    @(Bundle.JavaScript()
      .Add("~/scripts/jquery.validate.js")
      .Add("~/scripts/jquery.validate.unobtrusive.js")
      .Add("~/scripts/jquery.event.hover-1.0.js")
      .Add("~/scripts/jquery.alphanumeric.js")
      .Add("~/scripts/jquery.form.js")
      .Add("~/scripts/jquery.ui.timepicker-0.0.3.min.js")
      .Add("~/scripts/jquery.cookie.js")
      .Add("~/scripts/jquery.query.js")
      .Add("~/scripts/jquery.placeholder.js")
      .Add("~/scripts/supersubs.js")
      .Add("~/scripts/superfish.js")
      .Add("~/scripts/clubpool.js")
      .Add("~/scripts/scriptRegistrar.js")
      .Add("~/scripts/meets.js")
      .Add("~/scripts/teams.js")
      .Add("~/scripts/dashboard.js")
      .Add("~/views/schedule/schedule.js")
      .MvcRender("~/scripts/combined_#.js"))
    @RenderSection("PageScript", false)
    @Html.RenderRegisteredScriptViews()
  </body>
</html>
