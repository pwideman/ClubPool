@using ClubPool.Web.Controllers.Shared.SidebarGadgets

<!DOCTYPE html>
<html>
  <head>
    <title>@if (!string.IsNullOrWhiteSpace(ViewBag.Title)) { @(ViewBag.Title + " - ") } @ViewBag.SiteName</title>
    <meta charset="utf-8" />
    <link rel="stylesheet" type="text/css" href="@Url.AssetPath("jqueryuicss")" />
    @Html.Stylesheet("site.less")
    @if ("ie7" == ViewBag.Browser) { 
      <style type="text/css">
        .ui-tabs { position: static; }
      </style>
    }
  </head>
  <body>
    <div id="header">
      @Html.ContentImage("HeaderLogo.png", "Logo")
      <div class="loginStatusPanel">
        @{Html.RenderAction("LoginStatus", "Login");}
      </div>
      <div id="menucontainer">
        @{Html.RenderAction("Menu", "Navigation");}
      </div>
    </div>
    <div id="container">
      <div id="maincontent" class="column">
        @RenderBody()
      </div>
      @if (ViewData.ContainsKey(GlobalViewDataProperty.SidebarGadgetCollection)) {
        SidebarGadgetCollection sidebarGadgetCollection =
          ViewData[GlobalViewDataProperty.SidebarGadgetCollection] as SidebarGadgetCollection;
        if (sidebarGadgetCollection.Count > 0) {
          <div class="column sidebar-container">
            <div class="sidebar sidebar-corner">
              @foreach (var gadget in sidebarGadgetCollection.Values) {
                Html.RenderAction(gadget.Action, gadget.Controller, gadget.RouteValues);
              }
            </div>
          </div>
        }
      }
    </div>
    <script type="text/javascript" src="@Url.AssetPath("jquery")"></script>
    <script type="text/javascript">
      if (!window.jQuery) {
        document.write(unescape("%3Cscript src='@Url.LocalAssetPath("jquery")' type='text/javascript'%3E%3C/script%3E"));
      }
    </script>
    <script type="text/javascript" src="@Url.AssetPath("jqueryui")"></script>
    <script type="text/javascript">
      if (!$.ui) {
        document.write(unescape("%3Cscript src='@Url.LocalAssetPath("jqueryui")' type='text/javascript'%3E%3C/script%3E"));
      }
    </script>
    @Html.RenderSiteScripts()
    @RenderSection("PageScript", false)
    @Html.RenderRegisteredScriptViews()
  </body>
</html>
